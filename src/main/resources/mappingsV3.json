{
    "recipes": [
        {
            "name": "UseVarForListDecl",
            "description": "Convert local List<T> declarations to `var` when they have an initializer.",
            "rollbackOnError": false,
            "steps": [
                {
                    "match": {
                        "nodeType": "VariableDeclarationExpr",
                        "type": "java.util.List",
                        "requireInitializer": true
                    },
                    "actions": [
                        {
                            "changeType": {
                                "newType": "var"
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "ReplaceDateWithLocalDateTime",
            "description": "Replace `Date` with `LocalDateTime` and `new Date()` with `LocalDateTime.now()`.",
            "rollbackOnError": true,
            "imports": {
                "add": [
                    "java.time.LocalDateTime"
                ],
                "remove": []
            },
            "steps": [
                {
                    "match": {
                        "nodeType": "ObjectCreationExpr",
                        "fqn": "java.util.Date"
                    },
                    "actions": [
                        {
                            "replaceWithMethodCall": {
                                "scope": "LocalDateTime",
                                "method": "now"
                            }
                        }
                    ]
                },
                {
                    "match": {
                        "nodeType": "VariableDeclarationExpr",
                        "type": "java.util.Date"
                    },
                    "actions": [
                        {
                            "changeType": {
                                "newType": "java.time.LocalDateTime"
                            }
                        }
                    ]
                },
                {
                    "match": {
                        "nodeType": "Parameter",
                        "type": "java.util.Date"
                    },
                    "actions": [
                        {
                            "changeType": {
                                "newType": "java.time.LocalDateTime"
                            }
                        }
                    ]
                },
                {
                    "match": {
                        "nodeType": "MethodCallExpr",
                        "methodName": "awaitUntil",
                        "argumentType": "java.time.LocalDateTime",
                        "expectedParamType": "java.util.Date"
                    },
                    "actions": [
                        {
                            "wrapArgument": {
                                "template": "Date.from($ARG$.atZone(ZoneId.systemDefault()).toInstant())",
                                "addImports": [
                                    "java.util.Date",
                                    "java.time.ZoneId"
                                ]
                            }
                        }
                    ]
                }
            ]
        }
    ]
}